<!DOCTYPE html><html><head><meta charset="utf-8"/>
<title>Day 01 - Advent of Code 2023</title>
<script type="text/javascript">

function prepareInput( input ) {

	input = input.split("\n");

	return input;
}

function answer1( input ) {

	input = prepareInput(input);

	var answer = 0;

	for( var line of input ) {

		var numbers = line.replace(/\D/g, "");

		var firstDigit = numbers.charAt(0),
			lastDigit = numbers.charAt(numbers.length-1);

		var number = parseInt(firstDigit+""+lastDigit, 10);

		answer += number;
	}

	return answer;
}

function answer2( input ) {

	input = prepareInput(input);

	var answer = 0;

	var numbers = {
		'1': 1,
		'one': 1,
		'2': 2,
		'two': 2,
		'3': 3,
		'three': 3,
		'4': 4,
		'four': 4,
		'5': 5,
		'five': 5,
		'6': 6,
		'six': 6,
		'7': 7,
		'seven': 7,
		'8': 8,
		'eight': 8,
		'9': 9,
		'nine': 9
	};

	for( var line of input ) {

		var firstDigit,
			lastDigit,
			firstDigitPos = line.length +1,
			lastDigitPos = -1;

		Object.keys(numbers).forEach( function(item){

			var position = line.indexOf(item);

			if( position !== -1 && position < firstDigitPos ) {
				firstDigitPos = position;
				firstDigit = numbers[item];
			}

			position = line.lastIndexOf(item);

			if( position !== -1 && position > lastDigitPos ) {
				lastDigitPos = position;
				lastDigit = numbers[item];
			}

		});

		var number = parseInt(firstDigit+""+lastDigit, 10);

		answer += number;

	}

	return answer;
}


function testinput1(){
	return '(test)';
}


function getInput( textArea ) {

	var input = textArea.value;

	input = input.trim();

	if( ! input ) console.warn("please provide an input");

	return input;
}


function startAnswer( textArea, part, expectedAnswer ) {

	if( ! textArea ) textArea = document.getElementById('input');

	if( part != 1 && part != 2 ) part = 0;

	var input;

	if( part === 1 || part === 0 ) {
		input = getInput(textArea);
		document.getElementById('output-1').innerHTML = "<strong>Answer 1:</strong>\n";
		document.getElementById('output-1').innerHTML += answer1(input);
		if( expectedAnswer ) document.getElementById('output-1').innerHTML += "\n<strong>"+expectedAnswer+'</strong> (expected)';
	}

	if( part === 2 || part === 0 ) {
		input = getInput(textArea);
		document.getElementById('output-2').innerHTML = "<strong>Answer 2:</strong>\n";
		document.getElementById('output-2').innerHTML += answer2(input);
		if( expectedAnswer ) document.getElementById('output-2').innerHTML += "\n<strong>"+expectedAnswer+'</strong> (expected)';
	}

}


window.addEventListener('load',function(){

	var testinputButtons = document.querySelectorAll('.testinput-button');
	for( var testinputButton of testinputButtons ) {
		testinputButton.addEventListener( 'click', function(){
			var testinputButton = this,
				testinput = testinputButton.parentNode,
				testinputContent = testinput.querySelector('.testinput-content');

			var part = 0;
			if( testinputButton.dataset.part ) part = parseInt(testinputButton.dataset.part, 10);

			var answer = '';
			if( testinputContent.dataset.answer ) answer = testinputContent.dataset.answer;

			startAnswer(testinputContent, part, answer);
		});
	}

	document.getElementById('start').addEventListener('click', function(){
		startAnswer();
	});
});


</script>
<style>
textarea {
	display: block;
	border: 1px solid #aaa;
}
pre {
	background: #eee;
	width: calc(50vw - 10px);
	display: inline-block;
}
hr {
	border: 0;
	height: 1px;
	background: #ddd;
}
.testinput {
	display: inline-block;
}
</style>
</head>
<body>

<pre id="output-1"></pre>
<pre id="output-2"></pre>

<hr>

<div class="testinput">
<textarea readonly class="testinput-content" data-answer="142">1abc2
pqr3stu8vwx
a1b2c3d4e5f
treb7uchet</textarea>
<button class="testinput-button" data-part="1">Test-Input Part 1</button>
</div>

<div class="testinput">
<textarea readonly class="testinput-content" data-answer="281">two1nine
eightwothree
abcone2threexyz
xtwone3four
4nineeightseven2
zoneight234
7pqrstsixteen</textarea>
<button class="testinput-button" data-part="2">Test-Input Part 2</button>
</div>

<div class="testinput">
<textarea readonly class="testinput-content" data-answer="162">eighthree
sevenine</textarea>
<button class="testinput-button" data-part="2">Additional Test-Input Part 2</button>
</div>

<div class="testinput">
<textarea readonly class="testinput-content" data-answer="199">74cxeight
seven8fivescftvkmvxh66rkcfqfjf8
4twothree</textarea>
<button class="testinput-button" data-part="2">Additional Test-Input Part 2</button>
</div>

<hr>

<textarea id="input" style="width: 500px; height: 500px;"></textarea>
<button id="start">start</button>


</body></html>